!!! 5
html.no-js(xmlns:ng='http://angularjs.org', xmlns:app='ignored')
  head
      meta(charset='utf-8')
      meta(http-equiv='X-UA-Compatible', content='IE=edge,chrome=1')
  title Buildbot
  meta(name='description', content='Buildbot, the CI framework')
  meta(name='viewport', content='width=device-width')
  //if lte IE 8
    script(src='scripts/libs/json2.js')
    script(src='scripts/libs/html5shiv-printshiv.js')

  case self.environment || 'prod'
    when 'prod'
       link(rel='stylesheet', href='styles/styles.min.css?_#{(new Date()).getTime()}')
    default
       link(rel='stylesheet', href='styles/styles.css')
       //- automatic reload support. in "grunt dev" mode, page reload automatically
       script
         __reloadServerUrl="ws://#{self.reloadUrl}";
       script(type='text/javascript', src='//#{self.reloadUrl}/__reload/client.js')

  body.ng-cloak(ng-cloak='ng-cloak')
    // navbar
    div.navbar.navbar-fixed.navbar-inverse
      div.navbar-inner
        div.container
          a.btn.btn-navbar(ng-click="isCollapsed = !isCollapsed")
            span.icon-angle-down
          a.brand(href="/")
            img#logo(src="img/favicon.ico")
            | &nbsp;Buildbot
          ul.nav.top-menu
            li.dropdown.clearfix
              a.dropdown-toggle(href='#')
                | Discover
                span.caret
              ul.dropdown-menu(role='menu', aria-labelledby='dropdownMenu')
                li
                  a(href='continuous-integration.html') Continuous Integration
                li
                  a(href='basics.html') Buildbot Basics
                li
                  a(href='framework.html') Buildbot the CI Framework
                li.divider
                li
                  a(href='http://buildbot.net/trac/wiki/SuccessStories') Success stories
            li.dropdown.clearfix
              a.dropdown-toggle(href='#')
                | Use
                span.caret
              ul.dropdown-menu(role='menu', aria-labelledby='dropdownMenu')
                li
                  a(href='http://buildbot.net/buildbot/docs/current/tutorial/') Tutorial
                li
                  a(href='hhttp://buildbot.net/buildbot/docs/current/index.html') Latest documentation
                li.divider
                li
                  a(href='community.html') Support
                li.divider
                li
                  a(href='http://buildbot.net/buildbot/docs') Documentation for previous releases
                  a(href='http://trac.buildbot.net') Trac wiki
          div.nav-collapse(collapse="!isCollapsed")
            ul.nav.top-menu
              li.dropdown.clearfix
                a.dropdown-toggle(href='#')
                  | Roadmap
                  span.caret
                ul.dropdown-menu(role='menu', aria-labelledby='dropdownMenu')
                  li
                    a(href='nine.html') Nine: The future
              li.dropdown.clearfix
                a.dropdown-toggle(href='#')
                  | Contribute
                  span.caret
                ul.dropdown-menu(role='menu', aria-labelledby='dropdownMenu')
                  li
                    a(href='http://metabuildbot.buildbot.net') Metabuildbot: The buildbot of buildbot
                  li
                    a(href='http://trac.buildbot.net/query') Trac: The bug tracker
                  li
                    a(href='http://github.com/buildbot/buildbot') Github: the source code
                  li.divider
                  li
                    a(href='community.html') Community
    block content
    block footer

  case self.environment || 'prod'
    when 'prod'
       script(src='scripts/scripts.min.js?_#{(new Date()).getTime()}')
    default
       script(data-main='scripts/main.js',src="scripts/libs/require.js")

